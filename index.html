<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DQ7 „Éë„Éç„É´ÊîªÁï•</title>
    <style>
        body { min-height: 100vh; background: #ffffff; padding: 15px; color: #1e293b; font-family: sans-serif; margin: 0; }
        .app-container { max-width: 450px; margin: 0 auto; }
        .app-title { text-align: center; font-size: 24px; font-weight: 900; color: #1e293b; margin-bottom: 15px; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; }
        .guide-text { text-align: center; color: #64748b; font-size: 13px; margin-bottom: 10px; background: #f1f5f9; padding: 5px; border-radius: 8px; }
        .grid-container { display: grid; gap: 8px; margin-bottom: 20px; }
        .card { aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; font-weight: 900; border-radius: 12px; cursor: pointer; border: 2px solid #cbd5e1; background: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        
        .c-star { background: #fbbf24; border-color: #f59e0b; }
        .c-jk { background: #1e1b4b; border-color: #ef4444; color: #ffffff !important; }
        .c-m { background: #10b981; border-color: #ffffff; color: #ffffff !important; }
        .c-A { background: #ef4444; border-color: #fca5a5; color: white; } 
        .c-B { background: #22c55e; border-color: #86efac; color: white; } 
        .c-C { background: #eab308; border-color: #fde047; color: white; } 
        .c-D { background: #a855f7; border-color: #d8b4fe; color: white; } 
        .c-E { background: #ec4899; border-color: #f9a8d4; color: white; } 
        .c-F { background: #06b6d4; border-color: #67e8f9; color: white; } 
        .c-G { background: #f97316; border-color: #fdba74; color: white; } 
        .c-H { background: #64748b; border-color: #cbd5e1; color: white; } 
        .c-I { background: #10b981; border-color: #6ee7b7; color: white; } 
        .c-J { background: #3b82f6; border-color: #93c5fd; color: white; } 
        .c-K { background: #fb7185; border-color: #fda4af; color: white; } 

        .size-selector { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; margin-bottom: 10px; }
        .size-btn { padding: 10px 2px; border-radius: 12px; border: 1px solid #e2e8f0; background: #f8fafc; cursor: pointer; }
        .size-btn-active { background: #3b82f6; color: white; border-color: #2563eb; }
        .status-bar { text-align: center; margin-bottom: 10px; padding: 10px; background: #f8fafc; border-radius: 10px; font-weight: bold; border: 1px solid #e2e8f0; }
        .reset-btn { width: 100%; padding: 15px; margin-top: 25px; border-radius: 12px; background: #fee2e2; color: #b91c1c; border: 2px solid #fca5a5; font-size: 18px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-title">DQ7 „É©„ÉÉ„Ç≠„Éº„Éë„Éç„É´</div>
        <div id="size-selector" class="size-selector"></div>
        <div id="status" class="status-bar"></div>
        <div id="grid" class="grid-container"></div>
        <button id="reset-btn" class="reset-btn">„É™„Çª„ÉÉ„Éà</button>
    </div>

    <script>
        const alphabet = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K'];
        const sizes = [
            { t: 12, c: 4, l: 'ÁîòÂè£' }, { t: 16, c: 4, l: '‰∏≠Ëæõ' },
            { t: 20, c: 5, l: 'ËæõÂè£' }, { t: 24, c: 6, l: 'ÊøÄËæõ' }
        ];

        let state = { gridSize: sizes[0], cards: Array(12).fill(''), currentTool: '‚≠ê', tapCount: 0 };

        function render() {
            const statusEl = document.getElementById('status');
            const sizeSelector = document.getElementById('size-selector');
            const grid = document.getElementById('grid');

            statusEl.textContent = `Ê¨°: ${state.currentTool} ${alphabet.includes(state.currentTool) ? `(${state.tapCount + 1}ÊûöÁõÆ)` : ''}`;
            
            sizeSelector.innerHTML = '';
            sizes.forEach(size => {
                const btn = document.createElement('button');
                btn.className = `size-btn ${state.gridSize.t === size.t ? 'size-btn-active' : ''}`;
                btn.textContent = size.l;
                btn.onclick = () => {
                    if(confirm('„É™„Çª„ÉÉ„Éà„Åó„Å¶„Çµ„Ç§„Ç∫Â§âÊõ¥„Åó„Åæ„Åô„ÅãÔºü')){
                        state.gridSize = size; state.cards = Array(size.t).fill(''); 
                        state.currentTool = '‚≠ê'; state.tapCount = 0; render();
                    }
                };
                sizeSelector.appendChild(btn);
            });

            grid.style.gridTemplateColumns = `repeat(${state.gridSize.c}, 1fr)`;
            grid.innerHTML = '';
            state.cards.forEach((val, i) => {
                const card = document.createElement('div');
                let cClass = 'card';
                if (val === '‚≠ê') cClass += ' c-star';
                else if (val === 'üÉè') cClass += ' c-jk';
                else if (val === 'üîÑ') cClass += ' c-m';
                else if (val !== '') cClass += ` c-${val}`;
                card.className = cClass;
                card.textContent = val;
                card.onclick = () => {
                    if (state.cards[i] === '') {
                        state.cards[i] = state.currentTool;
                        updateTool();
                    } else {
                        state.currentTool = state.cards[i];
                        state.cards[i] = '';
                        state.tapCount = 0;
                    }
                    render();
                };
                grid.appendChild(card);
            });
        }

        function updateTool() {
            if (state.currentTool === '‚≠ê') state.currentTool = 'üÉè';
            else if (state.currentTool === 'üÉè') state.currentTool = 'üîÑ';
            else if (state.currentTool === 'üîÑ') { state.currentTool = 'A'; state.tapCount = 0; }
            else {
                state.tapCount++;
                if (state.tapCount >= 2) {
                    const idx = alphabet.indexOf(state.currentTool);
                    if (idx < alphabet.length - 1) { state.currentTool = alphabet[idx + 1]; state.tapCount = 0; }
                }
            }
        }

        document.getElementById('reset-btn').onclick = () => {
            if(confirm('„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºü')) {
                state.cards = Array(state.gridSize.t).fill('');
                state.currentTool = '‚≠ê'; state.tapCount = 0; render();
            }
        };

        render();
    </script>
</body>
</html>
